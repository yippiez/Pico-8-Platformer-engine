pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- Created by Eren Cem Ay under mit license :p

function _init()
--this is our player information kinda like struct in c
p = {
x = 16,
y = 16,
tj = 0
}
-- By the way tj stands for timejumper
-- its a timer for jumping

cameray = 0 -- cameray variable
canj = false -- stands for can jump
end

function _update60()
--this is executed 60 frames a second
--instead of _update() 30 frames a second
player_update() --updates everything
end

function _draw()
cls() --cleans screen
map(0,0 ,0,0 ,16,16) --draws the map
spr(1,p.x,p.y) --draws player
camera_set() --function below sets camera smoothnes
end

function player_update()
local tilex = flr((p.x/8)) --x tile location in pico 8 map
local tiley = flr((p.y/8))--y tile location in pico 8 map
local tilex2 = flr((((p.x+7))/8))--right side of players x tile
local tiley2 = flr((((p.y+7))/8))-- right side of players y tile

local vsp = 0 --verticalspeed these are mixed up
local hsp = 0 --horizantal speed these are mixed up i used vertical speed to go left right horizantal speed to go up and down

local v_d = mget(tilex,tiley+1) --gets the tile below player
local v_r = mget(tilex+1,tiley) --gets the tile right of the player
local v_l = mget(tilex,tiley) --gets the tile left of the player
--below 3 is checks the right side of the player,how?
--because center is left tilex2 and tiley2 checks for the right of the player
local v_d2 = mget(tilex2,tiley+1)
local v_r2 = mget(tilex+1,tiley2)
local v_l2 = mget(tilex2-1,tiley2)

if (btn(1)) vsp += 1 --if btn is pressed go right
if (btn(0) and p.x >= 2) vsp += -1--if btn is pressed and x is not lower then 2 go left
if (not btn(5) and p.tj < 15) canj = false -- if not pressing jump button and jump timer is bigger than 15 stop jumping
if (btn(5) and p.tj < 15 and canj) hsp = -2.8 p.tj += 1 -- if can jummp jump
if (isgrounded(v_d,v_d2)) p.tj = 0 canj = true --if is in ground it can jump

hsp += 1 --gravity --gravity
if ((fget(v_d,0) or fget(v_d2,0)) and hsp >=0) hsp = 0-- check for collisions
if  ((fget(v_r2,o) or fget(v_r,0)) and vsp >0) vsp = 0-- check for collisions
if ((fget(v_l2,0) or fget(v_l,0)) and vsp <0) vsp = 0 -- check for collisions
p.x += vsp --add vertical speed to x
p.y += hsp -- add horizantal speed to y
end

function camera_set()
--if camera is not on player then slowly move to it
local px = p.x-64 -- camera setup
local py = p.y-64
if (cameray < py) cameray += .8
if (cameray > py) cameray -= .8
camera(px,cameray)
end

--check if it is on ground
function isgrounded(v_d,v_d2) return (fget(v_d,0) or fget(v_d2,0)) end


__gfx__
00000000888888883333333344444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888883333333344444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b000000b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b000000b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b000000b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b000000b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b000000b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b000000b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2222222222222222222222222222222222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2222222222222222222222222222222222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2222222222222222222222222222222222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2222222222222222222222222222222222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2222222222222222222222222222222222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2222222222222222222222222202222222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2222020202020222222222020203022222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202030303030302020202030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030322222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2222222222222222222222222222222222222222222222222222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
